#!/bin/sh
#-------------------------------------------------------------------------------------# 
# PURPOSE: run file for Ix
#-------------------------------------------------------------------------------------# 
start=`date +%s`
#-------------------------------------------------------------------------------------# 
export DIR=~/data/ISD/ISD000/
if [ ! -d "$DIR" ]; then
    mkdir $DIR
fi

export -p IXDIR=/home/melodies-ist/wp07-di/src/main/app-resources/bin/ISD300_Ex/bin/

#-------------------------------------------------------------------------------------# 
function igcx(){
exec $IXDIR"resample_aoi_00107.sh" $1 $2
}

# imagem exemplo(2010)
# issues: procura por anos (2000 - 2015 (SET))
# issues: efectuar mosaico de imagens depois 2014

Y2= 2000
#-------------------------------------------------------------------------------------# 
while IFS='' read -r line || [[ -n "$line" ]]; do
	
	if [[ "$line" == AOI1 ]] ; then
		echo "${AOI01=$(echo 1985 $Y2 44.25 -9.75 36.75 3.00 0.75)}" >$DIR/AOI00.txt
		igcx echo "${IMG001=$(grep $Y2 $2)}"
		igcx $IMG001 $1
	
	elif [[ "$line" == AOI2 ]] ; then
		echo "${AOI2=$(echo 1985 $Y2 37.5 -19.0 12.0 25.5 0.75)}" >$DIR/AOI00.txt
		igcx echo "${IMG001=$(grep $Y2 $2)}"
		igcx $IMG001 $1

	elif [[ "$line" == AOI3 ]] ; then
		echo "${AOI3=$(echo 1985 $Y2 -9.0 21.0 -31.5 41.0 0.75)}" >$DIR/AOI00.txt
		igcx echo "${IMG001=$(grep $Y2 $2)}"
		igcx $IMG001 $1

	elif [[ "$line" == AOI4 ]] ; then
		echo "${AOI4=$(echo 1985 $Y2 42.5 25.5 36.0 45.0 0.75)}" >$DIR/AOI00.txt
		igcx echo "${IMG001=$(grep $Y2 $2)}"
		igcx $IMG001 $1

	else
		echo "AOI out of range"
	fi 
done < "$1"
#done < $inputfile
#-------------------------------------------------------------------------------------# 
end=`date +%s`
runtime=$((end-start))
echo "Runtime: $runtime seconds"
#-------------------------------------------------------------------------------------# 
exit 0 